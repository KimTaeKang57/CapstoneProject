# HTTP 통신과 SOCKET 통신의 차이점

# HTTP 통신
- HTTP란 Hyper Text Transfer Protocol, HTML 파일을 전송하는 프로토콜이다. 웹 브라우저에서 통신이 일어나며, 초기에는 HTML 파일을 전송하려는 목적으로 만들어졌으나, 현재는 JSON, Image 파일 등 또한 전송한다.

### HTTP 통신의 통신 방식
<img width="561" alt="스크린샷 2022-06-15 오후 7 18 18" src="https://user-images.githubusercontent.com/83891837/173804352-09e723bb-e005-4e11-8eae-b85391aa55f1.png">

- HTTP 통신은 클라이언트에서 서버로 요청을 보내고 서버가 응답하는 방식으로 통신이 이루어진다. 응답에는 클라이언트의 요청에 따른 결과를 반환한다. 따라서 클라이언트의 요청이 있을 때 서버가 응답하는 방식인 단방향 통신이다.
- 응답을 받은 후 Connection이 끊어지는 것이 기본 동작이지만, 성능 상으로 필요하다면 Keep Alive 옵션을 주어 일정 시간 동안 Connection을 유지하는 것이 가능하다. 

* Keep Alive
- Http는 Stateless(무상태) 이며, Connectionless이다. 즉 데이터를 우리가 지정한 시간 내에서 계속 주고 받을 수 있다는 것이다. 데이터를 빈번하게 주고받아야한다면 좋은 기능이지만, 사용자가 많아 연결이 늘어나 새로운 사용자를 받아들이지 못하게 될 수도 있다. 그래서 사용자가 많고 유동이 많은 서비스에서는 사용이 권장되지 않는다.

Stateful / Statleless (상태 / 무상태)
- Stateful : Client와 Server의 동작, 상태 정보를 저장하는 형태
- Stateless : Client와 Server의 동작, 상태 정보를 저장하지 않는 형태

Connectionless(비 연결성)
- Client가 Server에 요청을 하고 응답을 받으면 바로 TCP/IP 연결을 끊어 연결을 유지 하지 않는 것이다. 

# Socket 통신
- Socket이란 두 프로그램이 서로 데이터를 주고 받을 수 있게 양쪽에 생성되는 통신 단자이다.
<img width="561" alt="스크린샷 2022-06-15 오후 7 29 56" src="https://user-images.githubusercontent.com/83891837/173806463-3f3e465b-6acd-4247-9245-ce6304304158.png">

### Socket 통신의 통신 방식
- 소켓 통신이란 서버와 클라이언트가 서로에게 데이터 전달을 해 양방향 연결이 이루어지는 통신 (클라이언트도 서버로 요청을 보낼 수 있고 서버도 클라이언트로 요청을 보낼수 있음)
- 보통 스트리밍, 실시간 채팅 등 데이터를 주고 받아야 하는 경우에 Connection을 자주 맺고 끊는 HTTP 통신보다 소켓 통신이 적합
- Socket은 Connection을 들고 있기 때문에 HTTP 보다 많은 리소스가 소모


### Socket 이란 무엇인가 ?
- 네트워크 상에서 돌아가는 두 개의 프로그램 간 양방향 통신의 하나의 엔드 포인트, 포트 번호에 바인딩되어 TCP 레이어에서 데이터가 전달돼야하는 어플리케이션을 식별할 수 있게 함
- 엔드 포인트 : 아이피 주소와 포트 번호의 조합. 모든 TCP 연결은 2개의 엔드 포인트로 유일하게 식별됨. 따라서 클라이언트와 서버 간 여러개의 연결이 맺어질 수 있음
IP : 전세계 컴퓨터에 부여된 고유의 식별 주소
PORT : 포트는 네트워크 상에서 통신하기 위해 호스트 내부적으로 프로세스가 할당받아야 하는 고유한 숫자이다. 한 호스트 내에서 네트워크 통신을 하고 있는 프로세스를 식별하기 위해 사용되는 값이기 때문에, 같은 호스트 내에서 서로 다른 프로세스가 같은 포트 넘버를 가질 수 없다. 즉, 같은 컴퓨터 내에서 프로그램을 식별하는 번호이다.
- 소켓은 떨어져 있는 두 호스트를 연결해주는 도구로 인터페이스 역할을 하는데, 데이터를 주고 받을 수 있는 구조체로 소켓을 통해 데이터 통로가 만들어진다.

### 소켓 통신의 흐름
<img width="642" alt="스크린샷 2022-06-15 오후 8 19 55" src="https://user-images.githubusercontent.com/83891837/173815262-d01fbabe-da58-460a-88b8-3ce317b00434.png">

* 서버 : 클라이언트 소켓의 연결 요청을 대기하고 연결 요청이 오면 클라이언트 소켓을 생성하여 통신이 가능하게 한다
1. socket() 함수로 소켓 생성
2. bind() 함수로 ip / port 번호 지정
3. listen() 함수로 클라이언트의 접근 요청에 대해 수신 대기열을 만들어 몇 개의 클라이언트를 대기 시킬지 결정
4. accept() 함수를 사용하여 클라이언트와의 연결을 기다림

* 클라이언트 : 데이터 송수신이 일어나는 곳
1. socket() 함수로 가장먼저 소켓을 염
2. connect() 함수를 이용해 통신 할 서버의 설정된 ip / port에 통신을 시도
3. 통신 시도 시 서버가 accept() 함수를 이용해 클라이언트의 socket descriptor를 반환
4. 이렇게 클라이언트와 서버가 서로 read() write()를 해 양방향 통신

# 소켓의 종류
### TCP(스트림)

### UDP(데이터그램)
