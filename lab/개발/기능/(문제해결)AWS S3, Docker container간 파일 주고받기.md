# 이미지
- 프로젝트를 진행하면서 세포 계수 분석이 끝난 결과인 이미지 객체들을 어디에 저장하고 어디에서 관리할지 고민하였다. 그러다가 AWS의 Object Storage를 알게되었다.
안드로이드 내부저장소에도 이미지를 관리할 수 있지만, 안드로이드 내부저장소가 아니라 편리하게 이미지 객체를 관리할 공간에 딱 적합한 것이었다..!

안드로이드 개발을 맡은 친구들과 얘기를 진행해보니, 안드로이드에선 결과 이미지를 이미지 파일로 줘도 괜찮지만 열리는 "url"로 알려줘도 안드로이드에서 이미지를 보여줄수 있다는 말을 듣게되었다.

# 어! 그럼 S3에 업로드한 다음에 S3에 올라간 이미지의 Url을 반환해주면 되겠다
- 그래서 어떤식으로 처음에 코드를 진행했냐면... 여기서 Spring Framework와 Flask간의 파일 주고받기를 진행한다.

1. 이미지를 업로드하면 이미지를 Cell-service에서 Flask 서버로 보낸다.
2. Flask 서버에는 인공지능을 실행하는 코드가 들어있기 때문에 Flask 서버에 보낸 이미지를 인공지능 타겟 디렉토리에 저장한다.
3. 디렉토리에 저장된 이미지를 토대로 분석을 진행하고 결과 디렉토리에 저장함.
4. 결과 디렉토리에 저장된 이미지를 다시 Cell-service로 보내고, Cell-sercice에서 AWS S3에 이미지를 업로드하고 url을 받아낸다.
5. {전체 세포, 살아있는 세포, 죽은 세포, 비율, AWS S3 url}를 리턴해주면 안드로이드는 이 url을 통해 이미지를 보여주고, DB에는 url을 String으로 저장한다!!!

# 계획은 먹혔고, Local에선 잘 돌아갔다...
- 그런데 Docker Container로 실행한 이후에 문제가 발생하였다

# 문제 발생
로컬에선 같은 컴퓨터 내부의 디렉토리로 저장하고 S3에 올렸기 때문에 문제가 없었다. 그런데 Server에 Container로 올리는 순간 문제가 발생하였는데, 어느 부분이었나면

### 4번에서 문제가 발생하였다. 
- 원래 코드는 Flask 프로젝트에 저장된 이미지와 .json 파일을 Cell-service에서 파일을 읽어서 결과를 알아오는 방식이었는데, Container로 올린순간 각자 다른 공간이 되었기 때문에, 파일을 읽어올수가 없었던 것이다..
- 이때쯤 Naver Cloud Platform으로 옮겼을 때이고, 또 문제가 발생하여 실망했지만 한편으론 인공지능을 돌렸을때 서버가 죽지는 않는다는 사실에 안도했다.
